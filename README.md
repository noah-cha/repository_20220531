# 1. 리눅스 명령어
__리눅스 명령어 중 다음의 명령어를 조사하여 작성할 예정임.__
1. top
2. ps
3. jobs
4. kill
## 1.1 top
top은 현재 운영체제의 전반적인 상태를 나타냅니다. 실행결과는 다음과 같습니다.

![top](https://user-images.githubusercontent.com/104444048/171154190-1e02158f-ede1-49f5-885e-9a57b65c2913.JPG)

명령어 옵션은 다음과 같습니다(주요 옵션)
|옵션|인자|사용례|설명|
|:-----:|:-----:|:----:|---------|
|-b||`top -b`|배치 모드|
|-c||`top -c`|명령어 라인 표시|
|-d|업데이트 간격|`top -d 5`|업데이트 간격 설정|
|-H||`top -H`|모든 개별 상태 스레드 표시|
|-i||`top -i`|유휴(IDLE) 상태 프로세스 무시|
|-n|반복횟수|`top -n 5`|반복의 최대 횟수 지정|
|-p(PID)||`top -p2031`|지정한 프로세스 번호(PID) 만 보여주기|

-p 옵션은 유용합니다. -p 옵션의 사용례를 다음 사진으로 살펴봅시다.

![image](https://user-images.githubusercontent.com/104444048/171904414-2d80d03c-a9b5-47cc-9052-f54b61f05f64.png)

우선 위와 같이 ps 명령어를 통해 __PID__ 를 확인합니다. ps 명령어는 목차 2에서 다룰 것입니다. 저 사진의 프로세스 중 PID가 ___488___ 인 프로세스의 정보만 보도록 합시다. 이를 위해

`top -p488`

이라고 치고 실행해봅시다. 결과는 다음과 같습니다.

![image](https://user-images.githubusercontent.com/104444048/171905009-51bb10b9-0942-4ca3-9bc3-a675701a9330.png)

정상적으로 실행되었습니다. 

top 명령어가 실행되는 중에도 특정 키를 눌러 명령을 실행할 수 있습니다(vi 에디터의 ZZ와 같은)

실행 중의 명령어는 다음과 같습니다
|키|설명|
|:-:|---|
|스페이스바|화면 새로고침|
|k|kill 명령|
|r|우선순위 변경(-20~20)|
|Z|화면 색상 변경|
|B|글자 굵게|
|q|종료|

### 1.1.1 첫 번째 줄
top 명령어를 실행했을 때 가장 처음 보이는 숫자는 __시스템의 현재 시간__ 입니다. 캡처했을 당시의 시스템 시간인 ___오후 7시 35분 13초___ 가 24시간제로 표시됩니다.

다음으로 표시되는 시간은 __운영체제 부팅 후 지금까지의 시간__ 입니다. 위 사진에서는 부팅 후 약 17분이 지났음을 표시합니다.

그 다음에 이어지는 내용은 접속한 사용자 세션 수와 로드 애버리지입니다. 이 중에서 로드 애버리지는 __CPU 로드의 이동 평균__ 을 나타냅니다. 총 3개의 소수점 값이 보이는데, 앞에서부터 1분, 5분, 15분에 대한 평균 CPU 로드를 나타냅니다. 윈도우 작업관리자의 '성능'탭에도 이와 비슷한 기능이 있습니다.  CPU 코어가 1개라면 1.0일 경우 CPU를 100% 활용하고 있다는 의미입니다. CPU 코어가 n개인 경우에는 각 수치를 n으로 나눈 값이 한 코어당 평균사용량이 됩니다.

각각 __0.04, 0.02, 0.04__ 이므로 1분 평균 4%, 5분 평균 2%, 15분 평균 4%임을 알 수 있습니다.

### 1.1.2 두 번째 줄
두 번째 줄은 Tasks, 즉 현재 프로세스의 상태를 보입니다. 프로세스의 총 개수와 각 프로세스를 4개의 상태로 구분하여 나타냅니다. 다음 표를 참고하십시오.

|프로세스 상태|설명|
|:-----:|-------------------------------------------------------------------------------|
|running|현재 작업 중인 프로세스|
|sleeping|대기 상태인 프로세스|
|stopped|종료된 상태의 프로세스|
|zombie|좀비 상태의 프로세스|

총 2개의 프로세스 중 1개 프로세스가 작업 중이고, 1개 프로세스가 대기 상태임을 확인할 수 있습니다.

### 1.1.3 세 번째 줄
세 번째 줄은 CPU의 사용률을 각 영역별로 보여줍니다. 각 영역의 총합은 100%입니다.

|영역|설명|
|:----:|----|
|us|프로세스의 유저 영역 CPU 사용률|
|sy|프로세스의 시스템 커널 영역에서의 CPU 사용률|
|ni|프로세스의 우선순위 설정에 사용되는 CPU 사용률|
|id|전체 사용률 중 유휴 상태 비율(IDLE 상태)|
|wa|입출력이 완료될 때까지 대기하기 위해 대기하는 CPU 사용률|
|hi|하드웨어 인터럽트에 사용되는 CPU 사용률|
|si|소프트웨어 인터럽트에 사용되는 CPU 사용률|
|st|CPU를 VM에서 사용하여 대기하는 CPU 사용률|

### 1.1.4 네 번째 줄
네 번째 줄은 램의 메모리 영역으로 ___MiB___ 단위로 표기됩니다.(1MiB = 1024킬로바이트)

|영역|설명|
|:----:|----|
|total|메모리의 총량|
|free|가용 메모리 양|
|used|현재 사용중인 메모리 양|
|buff/cache|각각 커널 버퍼에서 사용되는 메모리와 디스크의 페이지 캐시(입출력 시 사용)|

### 1.1.5 다섯 번째 줄
다섯 번째 줄은 스왑(Swap) 메모리 영역으로 이 역시 MiB단위로 표기됩니다.

이 영역은 __디스크 영역__ 이고 메모리의 가용 공간이 부족할 때 사용합니다. 네 번째 줄과 비슷하나, buff/cache가 없고 avail Mem이 있습니다. __avail Mem__ 은 스왑 메모리 없이 사용 가능한 메모리 양입니다.

### 1.1.6 나머지 줄
나머지 줄이 나타내는 영역은 __디테일 영역__ 입니다. 각 프로세스에 대한 상새 정보가 표시됩니다.

다음 표는 해당 영역의 각 요소별 설명입니다.

|영역|설명|
|:----:|----|
|PID|프로세스 ID|
|USER|실행 또는 영향받는 사용자 이름|
|PR|우선순위(Priority)|
|NI|PR에 영향을 미치는 값(nice)|
|VIRT|프로세스가 사용중인 메모리|
|RES|램이 사용중인 메모리의 크기|
|SHR|공유메모리|
|S|프레소스의 현재 상태(status)(1.1.2 참고)|
|%CPU|CPU 점유율|
|%MEM|메모리 점유율|
|TIME+|프로세스가 CPU를 사용한 시간|
|COMMAND|프로세스를 실행시킨 명령어|

# 1.2 ps
ps 명령어는 __프로세스 상태 (Process Status)__ 의 약자로, 말 그대로 현재 프로세스들의 상태를 보여줍니다. 

실행결과는 다음과 같습니다.
![image](https://user-images.githubusercontent.com/104444048/171908223-915e7a21-63d4-47ce-8cc2-1d2603f86b56.png)

다음의 옵션들이 있습니다.

|옵션|인자|사용례|설명|
|:-----:|:-----:|:----:|---------|
|-a||`ps -a`|세션 리더와 터미널과 무관한 프로세스를 제외한 모든 프로세스 표시|
|-A||`ps -A`|모든 프로세스 표시|
|-d||`ps -d`|세션 리더를 제외한 모든 프로세스 표시|
|-T||`ps -T`|현 터미널의 모든 프로세스 표시|
|-i||`top -i`|유휴(IDLE) 상태 프로세스 무시|
|-r||`ps -r`|현재 실행중인 프로세스 표시|
|-p|"PID 번호"|`top -p2031`|지정한 프로세스 번호(PID) 만 보여주기|

-p 옵션의 사용례를 보겠습니다. 다음과 같이 입력합니다.

`ps -A`

이 명령어와 옵션은 모든 프로세스를 보여줍니다. 실행결과는 다음과 같습니다.
![image](https://user-images.githubusercontent.com/104444048/171908669-00a65df9-0a4f-46a8-aaf6-772e292b8b51.png)

도커 관련 프로세스 두 개를 대상으로 해 봅시다. 각각 ___211___ 과 ___221___ 의 PID를 가집니다. 다음과 같이 두 개의 PID를 한꺼번에 실행합시다.

`ps -p "211 221"`

결과는 다음과 같습니다.
![image](https://user-images.githubusercontent.com/104444048/171909109-9ee5c485-5c2e-4eeb-9b43-fc9adbc13e20.png)

두 프로세스 정보가 정상적으로 확인됩니다.

ps 명령어를 실행했을 시 각 영역이 있습니다. 각 영역별 설명은 다음 표에서 확인할 수 있습니다.

|영역|설명|
|:----:|----|
|PID|프로세스 ID|
|TTY|실행 또는 영향받는 사용자 이름|
|PR|우선순위(Priority)|
|NI|PR에 영향을 미치는 값(nice)|
|VIRT|프로세스가 사용중인 메모리|
|RES|램이 사용중인 메모리의 크기|
|SHR|공유메모리|
|S|프레소스의 현재 상태(status)(1.1.2 참고)|
|%CPU|CPU 점유율|
|%MEM|메모리 점유율|
|TIME+|프로세스가 CPU를 사용한 시간|
|COMMAND|프로세스를 실행시킨 명령어|
